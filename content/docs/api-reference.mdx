---
title: API reference
---

# API reference

The API consists of: (1) the object returned by `createContextMenu(config)` and its methods, (2) the config options you pass to `createContextMenu`, and (3) the menu item types you use inside `menu`.

---

## Instance methods

What you get from `createContextMenu(config)`:

<ApiTable
  headers={["Method", "Description"]}
  rows={[
    ["open(xOrEventOrElement?, yOrOptions?)", <>Show menu. No args: use <code>getAnchor</code> from config or (0,0). <code>(x, y)</code>: at coords. <code>(event)</code>: at event. <code>(element, options?)</code>: next to element (<code>placement</code>, <code>offset</code>). Returns <code>Promise&lt;MenuItem | undefined&gt;</code>. See <a href="#menu-item-types">Menu item types</a>.</>],
    ["close()", "Close the menu. Returns Promise&lt;void&gt; when the close animation finishes."],
    ["toggle(x?, y?)", "Open if closed, close if open. Optional (x, y) for open."],
    ["getState()", <>Returns <code>&#123; isOpen, anchor, menu, rootElement &#125;</code>. <code>menu</code> is a copy. Use <code>getState().isOpen</code>, <code>getState().anchor</code>, etc.</>],
    ["setMenu(menuOrUpdater)", <>Set menu (array) or update with a function <code>(current) =&gt; newItems</code>. See <a href="#menu-item-types">Menu item types</a>.</>],
    ["bind(element?, options?)", <>Bind to element (right-click / long-press). Call <code>bind()</code> or <code>bind(null)</code> to unbind. <code>options.longPressMs</code>: delay (default 500).</>],
    ["destroy()", "Remove menu and all listeners."],
    ["setOptions(options)", <>Update theme, position, animation, or <code>lockScrollOutside</code> at runtime. Only provided keys are applied. Same shapes as in config.</>],
  ]}
/>

### open

Shows the menu. Single unified method for all open cases.

- **Signature:** `open(xOrEventOrElement?, yOrOptions?): Promise<MenuItem | undefined>`
- **No args:** Uses `getAnchor` from config, or (0, 0).
- **`(x, y)`:** Opens at coordinates.
- **`(event)`:** Opens at the event client position.
- **`(element, options?)`:** Opens next to the element (`placement`, `offset`).
- **Returns:** Promise that resolves with the selected item when the menu closes, or `undefined` if closed without selection.


```js
const selected = await menu.open(200, 100);
if (selected) console.log("Selected:", selected.label);

element.addEventListener("contextmenu", (e) => {
  e.preventDefault();
  menu.open(e);
});

// Next to an element (dropdown-style)
await menu.open(button, { placement: "bottom-start", offset: { x: 0, y: 4 } });
```

### close

Closes the menu and runs the leave animation. Returns a Promise that resolves when the close animation finishes.

- **Signature:** `close(): Promise<void>`

```js
await menu.close();
```

### getState

Returns the current state: `{ isOpen, anchor, menu, rootElement }`. `menu` is a copy of the current items. Use this instead of separate `isOpen()`, `getAnchor()`, `getMenu()`, or `getRootElement()`.

- **Signature:** `getState(): ContextMenuState`

```js
const { isOpen, anchor, menu, rootElement } = menu.getState();
```

### bind

Attaches the menu to an element so it opens on right-click (desktop) or long-press (touch). Call `bind()` or `bind(null)` to unbind.

- **Signature:** `bind(element?: HTMLElement | null, options?: { longPressMs?: number }): void`
- **longPressMs:** Delay in ms before the menu opens on touch (default 500).

```js
menu.bind(document.getElementById("area"), { longPressMs: 400 });
menu.bind(); // or menu.bind(null) â€” unbind
```

### setMenu

Sets the menu. Pass an array to replace, or a function `(current) => newItems` to update from current state.

- **Signature:** `setMenu(menuOrUpdater: MenuItem[] | ((current: MenuItem[]) => MenuItem[])): void`

```js
menu.setMenu([
  { label: "Option A", onClick: () => {} },
  { label: "Option B", onClick: () => {} },
]);

// Updater (e.g. persist checkbox state)
menu.setMenu((current) =>
  current.map((item) =>
    item.type === "checkbox" && item.label === "Dark mode"
      ? { ...item, checked: !item.checked }
      : item
  )
);
```

### setOptions

Updates theme, position, animation, or `lockScrollOutside` at runtime. Only the keys you pass are applied. Same shapes as in config.

- **Signature:** `setOptions(options: ContextMenuInstanceOptions): void`

```js
menu.setOptions({ theme: { class: "my-dark", tokens: { bg: "#1a1a1a", fg: "#eee" } } });
menu.setOptions({ position: { padding: 12, zIndexBase: 10000 } });
menu.setOptions({ animation: { enter: 150, leave: 100 } });
menu.setOptions({ lockScrollOutside: false });
menu.setOptions({ theme: undefined }); // clear theme
```

### destroy

Removes the menu DOM and all event listeners. Call this when the component or page is torn down.

- **Signature:** `destroy(): void`

```js
menu.destroy();
```

---

## Config options

What you pass to createContextMenu:

<ApiTable
  headers={["Option", "Type", "Description"]}
  rows={[
    ["menu", "MenuItem array or function", <>The menu tree. If a function, it runs each time the menu opens (dynamic menu). See <a href="#menu-item-types">Menu item types</a> below.</>],
    ["submenuArrow", "boolean or object", "true = default chevron. Object: icon, size, className, opacity."],
    ["spinner", "object", "Default loading spinner. Overridable per item via loadingIcon, loadingSize, loadingSpeed."],
    ["theme", "object", <>class: CSS class on menu. tokens: e.g. bg, fg (sets --cm-bg, --cm-fg). See <a href="/docs/theming">Theming</a> doc.</>],
    ["animation", "object", <>type: fade or slide. enter/leave: ms or duration/easing. disabled: true = no animation. See <a href="/docs/animations">Animations</a> doc.</>],
    ["position", "object", <>Viewport padding, flip/shift to keep in view, z-index. See <a href="/docs/configuration">Configuration</a> doc.</>],
    ["portal", "HTMLElement or function", <>Where to mount the menu. Default: document.body. See <a href="/docs/configuration">Configuration</a> doc.</>],
    ["getAnchor", "function or DOMRect", <>Used when open() is called with no arguments. See <a href="/docs/configuration">Configuration</a> doc.</>],
    ["submenuPlacement", "right | left | auto", "Where to open submenus. auto uses RTL and viewport space."],
    ["bind", "HTMLElement or object", "Same as calling menu.bind(element, options) after create."],
    ["onOpen", "(event?) => void", "Called when menu opens."],
    ["onClose", "(context?) => void", "Called when menu closes (after leave animation). context has selectedItem and anchor."],
    ["onBeforeOpen", "(event?, context?) => boolean | void | Promise", "Return false to cancel."],
    ["onAfterClose", "(context?) => void", "Called after the menu is fully closed."],
    ["onBeforeClose", "() => boolean | void | Promise", "Return false to cancel close."],
    ["onItemHover", "(payload) => void", "Called when the user hovers or focuses an interactive item."],
    ["closeOnResize", "boolean", "If true, menu closes on window resize."],
    ["shortcutIcons", "Record", "Map of shortcut part names to SVG or HTMLElement."],
    ["lockScrollOutside", "boolean", "When true (default), prevent page scroll outside the menu while open. Set false to allow background scrolling."],
    ["platform", "mac | win | auto", "Override platform for shortcut display. Default auto detects."],
  ]}
/>

---

## Menu item types

Each entry in the `menu` array (and in submenu `children`) is one of the following types. Omitted `type` defaults to an action item.

### Action (default)

Clickable item. No need to set `type` unless you use another type.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["label", "string", "Text shown for the item."],
    ["icon", "string | HTMLElement", "Optional icon (HTML string or element)."],
    ["shortcut", "string", "Optional shortcut text (e.g. \"Ctrl+C\"). Display follows platform."],
    ["badge", "string | number | BadgeConfig", "Optional badge. BadgeConfig: { content?, className?, render? } for full control."],
    ["events", "EventRegistry | () => EventRegistry", "Optional custom DOM event handlers on the item element."],
    ["disabled", "boolean", "If true, item is not clickable."],
    ["loading", "boolean", "Shows a spinner; typically used while an async action runs."],
    ["variant", "\"danger\" | \"info\" | \"success\" | \"warning\" | \"muted\"", "Optional style variant (adds a CSS class)."],
    ["onClick", "(payload) => void", "Called when the item is activated. Payload includes close and event."],
    ["closeOnAction", "boolean", "If true (default), menu closes after click."],
    ["render", "(item) => HTMLElement", "Optional custom renderer; you return the DOM node, library still wires role and click."],
  ]}
/>

```js
{ label: "Copy", shortcut: "Ctrl+C", onClick: () => copy() }
{ label: "Delete", variant: "danger", onClick: ({ close }) => { remove(); close(); } }
```

### Link

Opens a URL. Use `type: "link"`.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["type", "\"link\"", "Required."],
    ["label", "string", "Link text."],
    ["href", "string", "URL."],
    ["icon", "string | HTMLElement", "Optional."],
    ["shortcut", "string", "Optional."],
    ["target", "string", "e.g. \"_blank\"."],
    ["rel", "string", "e.g. \"noopener noreferrer\"."],
  ]}
/>

```js
{ type: "link", label: "Documentation", href: "https://example.com/docs", target: "_blank" }
```

### Submenu

Opens a nested list. Use `type: "submenu"`.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["type", "submenu", "Required."],
    ["label", "string", "Label for the submenu trigger."],
    ["children", "array or function or async function", "Nested items. Function/async for lazy loading."],
    ["icon", "string or HTMLElement", "Optional."],
    ["shortcut", "string", "Optional."],
  ]}
/>

```js
{ type: "submenu", label: "More", children: [
  { label: "Rename", onClick: () => rename() },
  { label: "Delete", onClick: () => remove() },
]}
```

### Separator

Horizontal divider.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["type", "\"separator\"", "Required."],
    ["id", "string", "Optional."],
    ["className", "string", "Optional."],
  ]}
/>

```js
{ type: "separator" }
```

### Checkbox

Toggle item. Use `type: "checkbox"`.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["type", "\"checkbox\"", "Required."],
    ["label", "string", "Label text."],
    ["checked", "boolean", "Checked state."],
    ["onChange", "({ item, checked, nativeEvent, close }) => void", "Called when toggled. State not stored; use setMenu or function menu to persist."],
    ["leadingIcon", "string | HTMLElement", "Optional."],
    ["icon / uncheckedIcon", "string | HTMLElement", "Optional icons for checked/unchecked."],
  ]}
/>

```js
{ type: "checkbox", label: "Show grid", checked: showGrid, onChange: (v) => setShowGrid(v) }
```

### Radio

Single selection within a group. Use `type: "radio"`.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["type", "\"radio\"", "Required."],
    ["label", "string", "Label text."],
    ["name", "string", "Group name (all radios with same name are grouped)."],
    ["value", "string", "Value for this option."],
    ["checked", "boolean", "Whether this option is selected."],
    ["onSelect", "({ item, value, nativeEvent, close }) => void", "Called when selected. Update menu to reflect selection."],
  ]}
/>

```js
{ type: "radio", name: "size", label: "Small", value: "s", checked: size === "s", onSelect: () => setSize("s") }
{ type: "radio", name: "size", label: "Large", value: "l", checked: size === "l", onSelect: () => setSize("l") }
```

### Label

Non-clickable header or section title. Use `type: "label"`.

<ApiTable
  headers={["Prop", "Type", "Description"]}
  rows={[
    ["type", "\"label\"", "Required."],
    ["label", "string", "Text to show."],
    ["id", "string", "Optional."],
    ["className", "string", "Optional."],
  ]}
/>

```js
{ type: "label", label: "Section title" }
```
